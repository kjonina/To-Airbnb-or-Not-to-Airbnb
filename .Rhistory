scope = 'europe',
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5,
resolution = 50,
lonaxis = list(range = c(-12, -5)),
lataxis = list(range = c(52, 55))
)
fig <- plot_geo(rpz_df, lat = ~latitude, lon = ~longitude, color = ~per_year_rent_AirBnB)
fig <- fig %>% add_markers(marker = list(opacity = 0.4),colors = rent_colors,
hovertemplate = ~paste("County:", county, "<br>",
"Price (in €):", total_income, "<br>",
"Room Type", room_type, "<br>",
"Mininum stay (in nights)", minimum_nights, "<br>",
"Availability (in nights)", available_nights, "<br>",
"To Rent or To Buy:",per_year_rent_AirBnB))
fig <- fig %>% layout(
title = list(text = '<b>Based on Potential Annual Earning, <span style="color:#F58518;">Long-Term Leasing</span> seems\n to bring in more revenue in <span style="color:#F58518;">all counties</span> except Tipperary</b>',
x = 0.5), geo = g)
fig
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(id) %>%
count(rent_pressure_zone) %>%
plot_ly(labels = ~rent_pressure_zone, values = ~n, type = 'pie',
textinfo = 'label+percent',
hoverinfo = 'label+value',
hole = 0.5,
marker = list(colors = pressure_colors)) %>%
layout(title = list(text = '<b><span style="color:#D62728;">Over 9,600 </span> of Airbnb listings are in <span style="color:#D62728;">Rent Pressure Zones</span>.</b>',
x = 0.5),
showlegend = TRUE)
df
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(id) %>%
count(rent_pressure_zone) %>%
plot_ly(labels = ~rent_pressure_zone, values = ~n, type = 'pie',
textinfo = 'label+percent',
hoverinfo = 'label+value',
hole = 0.5,
marker = list(colors = pressure_colors)) %>%
layout(title = list(text = '<b><span style="color:#D62728;">Over 9,600 </span> of Airbnb listings are in <span style="color:#D62728;">Rent Pressure Zones</span>.</b>',
x = 0.5),
showlegend = TRUE)
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(id, rent_pressure_zone) %>%
count(rent_pressure_zone) %>%
plot_ly(labels = ~rent_pressure_zone, values = ~n, type = 'pie',
textinfo = 'label+percent',
hoverinfo = 'label+value',
hole = 0.5,
marker = list(colors = pressure_colors)) %>%
layout(title = list(text = '<b><span style="color:#D62728;">Over 9,600 </span> of Airbnb listings are in <span style="color:#D62728;">Rent Pressure Zones</span>.</b>',
x = 0.5),
showlegend = TRUE)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(stringr)
library(knitr)
library(plotly)
library(forcats)
library(crosstalk)
library(here)
library(camcorder)
df %>%
group_by(month_category) %>%
summarise(n = n())
camcorder::gg_record(dir = here("outputs"),
device = "png",
width = 8, height = 7,
units = "in", dpi = 320
)
summary(df)
# assigning colors to specific variable
# will be used in graphs to ensure that the colours remain the same.
# creates association with colour and variables
#RPZ or Non-RPZ
pressure_colors = c( "#316395", "#D62728")
#entire rental unit, private room, shared room
room_colors = c('#54A24B', '#72B7B2', '#B279A2')
# rent or AirBnB
rent_colors = c('#565656', '#F58518')
#over-90 or under-90
threshold_colors = c('#FF9DA6', '#72B7B2')
# availability
reverse_viridis = c( "#FDE725FF",
'#B8DE29FF',
'#73D055FF',
'#29AF7FFF',
'#1F968BFF',
'#2D708EFF',
'#39568CFF',
'#482677FF',
"#440154FF")
# creating a map of Ireland with AirBnB listings in RTZ differentiated
g <- list(
scope = 'europe',
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5,
resolution = 50,
lonaxis = list(range = c(-12, -5)),
lataxis = list(range = c(52, 55))
)
unique_id_df <- df %>%
group_by(id, rent_pressure_zone, lea, council, room_type, latitude, longitude) %>%
summarise(price = mean(price))
fig <- plot_geo(df, lat = ~latitude, lon = ~longitude, color = ~rent_pressure_zone)
fig <- fig %>% add_markers(marker = list(opacity = 0.2), showlegend=FALSE, colors = pressure_colors,
hovertemplate = ~paste("LEA:", lea, "<br>",
"Council:", council, "<br>",
"Price (in €):", price, "<br>",
"Room Type", room_type, "<br>",
"RTZ", rent_pressure_zone, "<br>"))
fig <- fig %>% layout(
title = 'Which AirBnB listings are in the RTZs?', geo = g)
fig
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
select(rent_pressure_zone, room_type, price, minimum_nights) %>%
group_by(room_type, rent_pressure_zone) %>%
summarise(count = n(),
min_price = min(price),
median_price = median(price),
mean_price = mean(price),
max_price = max(price),
min_nights = min(minimum_nights),
median_min_nights = median(minimum_nights),
mean_min_nights = mean(minimum_nights),
max_min_nights = max(minimum_nights))
# eamining the number of AirBnB listings available in each month
df %>%
select(id, rent_pressure_zone) %>%
group_by(rent_pressure_zone) %>%
summarize(count_distinct = n())
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(id, rent_pressure_zone) %>%
count(rent_pressure_zone) %>%
plot_ly(labels = ~rent_pressure_zone, values = ~n, type = 'pie',
textinfo = 'label+percent',
hoverinfo = 'label+value',
hole = 0.5,
marker = list(colors = pressure_colors)) %>%
layout(title = list(text = '<b><span style="color:#D62728;">Over 9,600 </span> of Airbnb listings are in <span style="color:#D62728;">Rent Pressure Zones</span>.</b>',
x = 0.5),
showlegend = TRUE)
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(id, rent_pressure_zone) %>%
count(rent_pressure_zone)
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(id, rent_pressure_zone) %>%
summarise(n = n()) %>%
plot_ly(labels = ~rent_pressure_zone, values = ~n, type = 'pie',
textinfo = 'label+percent',
hoverinfo = 'label+value',
hole = 0.5,
marker = list(colors = pressure_colors)) %>%
layout(title = list(text = '<b><span style="color:#D62728;">Over 9,600 </span> of Airbnb listings are in <span style="color:#D62728;">Rent Pressure Zones</span>.</b>',
x = 0.5),
showlegend = TRUE)
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(id, rent_pressure_zone) %>%
summarise(n = n())
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone, id) %>%
summarise(n = n())
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone, id) %>%
summarise(n = n(unique(id)))
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone, id) %>%
summarise(n = n(id))
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone, id) %>%
summarise(n = n())
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone, id) %>%
count(unique(id))
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone) %>%
count(unique(id))
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone) %>%
count(n = n_distince(id))
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone) %>%
count(n = n_distinct(id))
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone) %>%
count(n_distinct(id))
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone) %>%
summarise(n_distinct(id))
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone) %>%
summarise(n_distinct(id)) %>%
plot_ly(labels = ~rent_pressure_zone, values = ~n, type = 'pie',
textinfo = 'label+percent',
hoverinfo = 'label+value',
hole = 0.5,
marker = list(colors = pressure_colors)) %>%
layout(title = list(text = '<b><span style="color:#D62728;">Over 9,600 </span> of Airbnb listings are in <span style="color:#D62728;">Rent Pressure Zones</span>.</b>',
x = 0.5),
showlegend = TRUE)
knitr::opts_chunk$set(echo = TRUE)
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone) %>%
summarise(n = n_distinct(id)) %>%
plot_ly(labels = ~rent_pressure_zone, values = ~n, type = 'pie',
textinfo = 'label+percent',
hoverinfo = 'label+value',
hole = 0.5,
marker = list(colors = pressure_colors)) %>%
layout(title = list(text = '<b><span style="color:#D62728;">Over 9,600 </span> of Airbnb listings are in <span style="color:#D62728;">Rent Pressure Zones</span>.</b>',
x = 0.5),
showlegend = TRUE)
rpz_df <- df %>%
filter(rent_pressure_zone == 'RPZ')
# geo styling
g <- list(
scope = 'europe',
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5,
resolution = 50,
lonaxis = list(range = c(-12, -5)),
lataxis = list(range = c(52, 55))
)
fig <- plot_geo(rpz_df, lat = ~latitude, lon = ~longitude, color = ~per_year_rent_AirBnB)
fig <- fig %>% add_markers(marker = list(opacity = 0.4),colors = rent_colors,
hovertemplate = ~paste("County:", county, "<br>",
"Price (in €):", total_income, "<br>",
"Room Type", room_type, "<br>",
"Mininum stay (in nights)", minimum_nights, "<br>",
"Availability (in nights)", available_nights, "<br>",
"To Rent or To Buy:",per_year_rent_AirBnB))
fig <- fig %>% layout(
title = list(text = '<b>Based on Potential Annual Earning, <span style="color:#F58518;">Long-Term Leasing</span> seems\n to bring in more revenue in <span style="color:#F58518;">all counties</span> except Tipperary</b>',
x = 0.5), geo = g)
fig
knitr::opts_chunk$set(echo = TRUE)
# geo styling
g <- list(
scope = 'europe',
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5,
resolution = 50,
lonaxis = list(range = c(-12, -5)),
lataxis = list(range = c(52, 55))
)
fig <- plot_geo(rpz_df, lat = ~latitude, lon = ~longitude, color = ~per_year_rent_AirBnB)
fig <- fig %>% add_markers(marker = list(opacity = 0.4),colors = rent_colors,
hovertemplate = ~paste("County:", county, "<br>",
"Price (in €):", rent_potential_annual_income_per_year, "<br>",
"Room Type", room_type, "<br>",
"Mininum stay (in nights)", minimum_nights, "<br>",
"Availability (in nights)", available_nights, "<br>",
"To Rent or To Buy:",per_year_rent_AirBnB))
fig <- fig %>% layout(
title = list(text = '<b>Based on Potential Annual Earning, <span style="color:#F58518;">Long-Term Leasing</span> seems\n to bring in more revenue in <span style="color:#F58518;">all counties</span> except Tipperary</b>',
x = 0.5), geo = g)
fig
knitr::opts_chunk$set(echo = TRUE)
# geo styling
g <- list(
scope = 'europe',
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5,
resolution = 50,
lonaxis = list(range = c(-12, -5)),
lataxis = list(range = c(52, 55))
)
fig <- plot_geo(rpz_df, lat = ~latitude, lon = ~longitude, color = ~per_year_rent_AirBnB)
fig <- fig %>% add_markers(marker = list(opacity = 0.4),colors = rent_colors,
hovertemplate = ~paste("County:", county, "<br>",
"Price (in €):", rent_potential_annual_income_per_year, "<br>",
"Room Type", room_type, "<br>",
"Mininum stay (in nights)", minimum_nights, "<br>",
"To Rent or To Buy:",per_year_rent_AirBnB))
fig <- fig %>% layout(
title = list(text = '<b>Based on Potential Annual Earning, <span style="color:#F58518;">Long-Term Leasing</span> seems\n to bring in more revenue in <span style="color:#F58518;">all counties</span> except Tipperary</b>',
x = 0.5), geo = g)
fig
rpz_df %>%
select(id, per_year_rent_AirBnB) %>%
group_by(per_year_rent_AirBnB) %>%
summarize(count_distinct = n())
rpz_df %>%
count(per_year_rent_AirBnB) %>%
plot_ly(labels = ~per_year_rent_AirBnB, values = ~n, type = 'pie',
textinfo = 'label+percent',
hoverinfo = 'label+value',
hole = 0.5,
marker = list(colors = rent_colors)) %>%
layout(title = list(text = '<b><span style="color:#F58518;">Over 2,000 </span> Airbnb listings would bring <span style="color:#F58518;">more revenue</span>\n by <span style="color:#F58518;">Long-Term Renting</span> than Airbnb in RPZs.</b>',
x = 0.5),
showlegend = TRUE)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(stringr)
library(knitr)
library(plotly)
library(forcats)
library(crosstalk)
library(here)
library(camcorder)
df %>%
group_by(month_category) %>%
summarise(n = n())
camcorder::gg_record(dir = here("outputs"),
device = "png",
width = 8, height = 7,
units = "in", dpi = 320
)
summary(df)
# assigning colors to specific variable
# will be used in graphs to ensure that the colours remain the same.
# creates association with colour and variables
#RPZ or Non-RPZ
pressure_colors = c( "#316395", "#D62728")
#entire rental unit, private room, shared room
room_colors = c('#54A24B', '#72B7B2', '#B279A2')
# rent or AirBnB
rent_colors = c('#565656', '#F58518')
#over-90 or under-90
threshold_colors = c('#FF9DA6', '#72B7B2')
# availability
reverse_viridis = c( "#FDE725FF",
'#B8DE29FF',
'#73D055FF',
'#29AF7FFF',
'#1F968BFF',
'#2D708EFF',
'#39568CFF',
'#482677FF',
"#440154FF")
# creating a map of Ireland with AirBnB listings in RTZ differentiated
g <- list(
scope = 'europe',
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5,
resolution = 50,
lonaxis = list(range = c(-12, -5)),
lataxis = list(range = c(52, 55))
)
unique_id_df <- df %>%
group_by(id, rent_pressure_zone, lea, council, room_type, latitude, longitude) %>%
summarise(price = mean(price))
fig <- plot_geo(df, lat = ~latitude, lon = ~longitude, color = ~rent_pressure_zone)
fig <- fig %>% add_markers(marker = list(opacity = 0.2), showlegend=FALSE, colors = pressure_colors,
hovertemplate = ~paste("LEA:", lea, "<br>",
"Council:", council, "<br>",
"Price (in €):", price, "<br>",
"Room Type", room_type, "<br>",
"RTZ", rent_pressure_zone, "<br>"))
fig <- fig %>% layout(
title = 'Which AirBnB listings are in the RTZs?', geo = g)
fig
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
select(rent_pressure_zone, room_type, price, minimum_nights) %>%
group_by(room_type, rent_pressure_zone) %>%
summarise(count = n(),
min_price = min(price),
median_price = median(price),
mean_price = mean(price),
max_price = max(price),
min_nights = min(minimum_nights),
median_min_nights = median(minimum_nights),
mean_min_nights = mean(minimum_nights),
max_min_nights = max(minimum_nights))
# eamining the number of AirBnB listings available in each month
df %>%
select(id, rent_pressure_zone) %>%
group_by(rent_pressure_zone) %>%
summarize(count_distinct = n())
# creating a dataframe with rent_pressure_zone and room_type, arranging by count
df %>%
group_by(rent_pressure_zone) %>%
summarise(n = n_distinct(id)) %>%
plot_ly(labels = ~rent_pressure_zone, values = ~n, type = 'pie',
textinfo = 'label+percent',
hoverinfo = 'label+value',
hole = 0.5,
marker = list(colors = pressure_colors)) %>%
layout(title = list(text = '<b><span style="color:#D62728;">Over 9,600 </span> of Airbnb listings are in <span style="color:#D62728;">Rent Pressure Zones</span>.</b>',
x = 0.5),
showlegend = TRUE)
df %>%
count(rent_pressure_zone, room_type) %>%
mutate(room_type = fct_reorder(room_type, n, .desc = TRUE)) %>%
plot_ly(x = ~room_type, y = ~n, color = ~rent_pressure_zone,
hovertemplate = ~paste("RTZ:", rent_pressure_zone, "<br>",
"Accomodation Type:", room_type, "<br>",
"Number of AirBnB listings:", n)) %>%
add_bars(showlegend=FALSE, colors = pressure_colors) %>%
layout(xaxis = list(title = FALSE),
yaxis = list(title = "Number of AirBnB listings"),
title = list(text = '<b>There are as Entire Rental Units on Airbnb\n as Private Rooms in <span style="color:#D62728;">Rent Pressure Zones</span>.<b>',
x = 0.5))
df %>%
plot_ly(x = ~room_type, y = ~price, color = ~rent_pressure_zone) %>%
add_boxplot(marker = list(opacity = 0.2), showlegend = FALSE, colors = pressure_colors) %>%
layout(
xaxis = list(title = FALSE),
yaxis = list(title = "Price in Euro",
zerolinecolor = '#ffff',
zerolinewidth = 2,
gridcolor = 'ffff',
range = list(0, 450)),
title = list(text = '<b><span style="color:#D62728;">Entire Units in Rent Pressure Zoness</span> are\n on average <span style="color:#D62728;">more expensive</span> than units outside of RPZs\n or other accommodation types</b>',
x = 0.5),
boxmode = "group")
rpz_df <- df %>%
filter(rent_pressure_zone == 'RPZ')
# geo styling
g <- list(
scope = 'europe',
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5,
resolution = 50,
lonaxis = list(range = c(-12, -5)),
lataxis = list(range = c(52, 55))
)
fig <- plot_geo(rpz_df, lat = ~latitude, lon = ~longitude, color = ~per_year_rent_AirBnB)
fig <- fig %>% add_markers(marker = list(opacity = 0.4),colors = rent_colors,
hovertemplate = ~paste("County:", county, "<br>",
"Price (in €):", rent_potential_annual_income_per_year, "<br>",
"Room Type", room_type, "<br>",
"Mininum stay (in nights)", minimum_nights, "<br>",
"To Rent or To Buy:",per_year_rent_AirBnB))
fig <- fig %>% layout(
title = list(text = '<b>Based on Potential Annual Earning, <span style="color:#F58518;">Long-Term Leasing</span> seems\n to bring in more revenue in <span style="color:#F58518;">all counties</span> except Tipperary</b>',
x = 0.5), geo = g)
fig
rpz_df %>%
select(id, per_year_rent_AirBnB) %>%
group_by(per_year_rent_AirBnB) %>%
summarize(count_distinct = n())
rpz_df %>%
count(per_year_rent_AirBnB) %>%
plot_ly(labels = ~per_year_rent_AirBnB, values = ~n, type = 'pie',
textinfo = 'label+percent',
hoverinfo = 'label+value',
hole = 0.5,
marker = list(colors = rent_colors)) %>%
layout(title = list(text = '<b><span style="color:#F58518;">Over 2,000 </span> Airbnb listings would bring <span style="color:#F58518;">more revenue</span>\n by <span style="color:#F58518;">Long-Term Renting</span> than Airbnb in RPZs.</b>',
x = 0.5),
showlegend = TRUE)
